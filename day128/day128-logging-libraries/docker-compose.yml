version: '3.8'

services:
  dashboard:
    build:
      context: .
      dockerfile: docker/Dockerfile.dashboard
    ports:
      - "5000:5000"
    environment:
      - FLASK_ENV=production
    volumes:
      - ./logs:/app/logs
    restart: unless-stopped

  java-client-demo:
    build:
      context: .
      dockerfile: docker/Dockerfile.java
    depends_on:
      - dashboard
    environment:
      - LOG_ENDPOINT=http://dashboard:5000/api/logs
      - SERVICE_NAME=java-demo-service
    restart: unless-stopped

  nodejs-client-demo:
    build:
      context: .
      dockerfile: docker/Dockerfile.nodejs
    depends_on:
      - dashboard
    environment:
      - LOG_ENDPOINT=http://dashboard:5000/api/logs
      - SERVICE_NAME=nodejs-demo-service
    restart: unless-stopped

  python-client-demo:
    build:
      context: .
      dockerfile: docker/Dockerfile.python
    depends_on:
      - dashboard
    environment:
      - LOG_ENDPOINT=http://dashboard:5000/api/logs
      - SERVICE_NAME=python-demo-service
    restart: unless-stopped

  dotnet-client-demo:
    build:
      context: .
      dockerfile: docker/Dockerfile.dotnet
    depends_on:
      - dashboard
    environment:
      - LOG_ENDPOINT=http://dashboard:5000/api/logs
      - SERVICE_NAME=dotnet-demo-service
    restart: unless-stopped
